<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basket Page</title>
  <link rel="stylesheet" href="basketInFFS.css" />
</head>
<body>
  <div class="outer-wrapper">
  <header>
    <a href="../../Home.html">
      <h1 class="main-title">Moltiz! Maltiz!</h1>
    </a>
    <h2 class="subtitle">Basket</h2>
  </header>

  <main class="basket-container">

    <!-- 상품 카드 -->
    <section class="item-section">
      <div class="item-box">
        <img src="https://ninjastorage.blob.core.windows.net/companyfiles/205623498/779b76b0-c177-4289-82ef-09d7301b188c.png" alt="Figure Box" class="item-img">

       <div class="figure-right">
        <h2>Moltiz Bag</h2>
        <div class="price-row">
        <div class="discount-badge">50% DC!</div>
        <div class="price-text">
        <strong>$6</strong> <del>$12</del>
        </div>
      </div>
        <p><strong>Delivery Fee:</strong> $1</p>

        <!-- Coupon selector -->
      <div class="coupon-box">
        <label for="couponSelect"><strong>Coupon:</strong></label>
        <select id="couponSelect">
        <option value="">-- No coupon --</option>
        </select>
        <div id="couponHint" class="coupon-hint"></div>
      </div>

        <div class="quantity-box">
  <label for="quantity-input" class="visually-hidden">Quantity</label>
  <input id="quantity-input" type="number" min="1" value="1" />
  <!-- 총액을 업데이트할 자리: id 추가 -->
  <span class="total-label"><b id="total-price">7</b></span>
</div>

      <!-- 삭제 버튼 -->
      <!-- Delete 버튼 -->
      <button id="delete-btn" class="delete-btn">Delete</button>

      <!-- 확인 모달 -->
    <div id="delete-confirm" class="delete-confirm hidden">
      <p>Are you sure you want to delete this product?</p>
      <div class="confirm-buttons">
      <button id="confirm-yes">Yes</button>
      <button id="confirm-no">No</button>
     </div>
   </div>
    </section>

    <!-- 총 결제 영역 -->
    <section class="summary-section">
      <p><strong>Price</strong> $<span id="price-value">6</span></p>
      <p><strong>Delivery Fee</strong> $<span id="delivery-fee">1</span></p>
      <p><strong>Total Fee</strong> $<span id="total-fee">7</span></p>
      <p class="summary-total">$<span id="summary-final">7</span></p>


      <button id="buyNow" class="buy-btn">Buy Now</button>  <!--107번째줄 수정함 !!--> 
    </section>

  </main>
  </div>

<script>
  const deleteBtn = document.getElementById('delete-btn');
  const confirmBox = document.getElementById('delete-confirm');
  const yesBtn = document.getElementById('confirm-yes');
  const noBtn = document.getElementById('confirm-no');

  // Delete 버튼 클릭 시 모달 보이기
  deleteBtn.addEventListener('click', () => {
    confirmBox.classList.remove('hidden');
  });

  // ✅ Yes 누르면 basket.html로 이동
  yesBtn.addEventListener('click', () => {
    window.location.href = '../../basket.html';
  });

  // ❌ No 누르면 basketInFF.html로 되돌아감
  noBtn.addEventListener('click', () => {
  window.location.reload();  // 현재 화면 그대로 유지
});
</script>


<script>
  const quantityInput = document.getElementById("quantity-input");
  const totalPriceSpan = document.getElementById("total-price");
  const priceValue = document.getElementById("price-value");
  const deliveryFeeValue = document.getElementById("delivery-fee");
  const totalFee = document.getElementById("total-fee");
  const summaryFinal = document.getElementById("summary-final");

  const pricePerItem = 6;
  const delivery = 1;

  function updateTotalPrice() {
    const quantity = parseInt(quantityInput.value) || 1;
    const productTotal = pricePerItem * quantity;
    const finalTotal = productTotal + delivery;

    // 각 요소 업데이트
    priceValue.textContent = productTotal;
    totalPriceSpan.textContent = `Total $${finalTotal}`;
    totalFee.textContent = finalTotal;
    summaryFinal.textContent = finalTotal;
  }

  // 초기 렌더링
  updateTotalPrice();

  // 수량 변경 시 총액 자동 계산
  quantityInput.addEventListener("input", updateTotalPrice);
</script>

<!-- Confirm Modal -->
<div id="confirmOverlay" class="confirm-overlay hidden">
  <div class="confirm-modal">
    <h3 id="confirmTitle">Are you sure you want to buy it?</h3>
    <div class="confirm-actions">
      <button id="confirmYes" class="btn-primary">Yes</button>
      <button id="confirmNo"  class="btn-secondary">No</button>
    </div>
  </div>
</div>

<!-- 모든 페이지의 </body> 직전에 추가 -->
<script src="../../search.js" defer></script>

<script src="../../coupon.js"></script>


<!-- buy.js를 모달 HTML 뒤에 불러오기 -->
<script src="../../buy.js"></script>

<script>
  window.PRODUCT_ID = 56; // 이 상품의 실제 id
</script>
<script src="../../pay.js"></script>


</body>
</html>